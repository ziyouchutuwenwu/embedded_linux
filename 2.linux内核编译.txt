参考的https://www.cnblogs.com/pengdonglin137/p/5023342.html#_label1

下载内核源码
https://mirrors.edge.kernel.org/pub/linux/kernel/v4.x/linux-4.19.tar.xz

工具链自己搞定

编译linux内核
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- O=./out_vexpress_4_19 vexpress_defconfig
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- O=./out_vexpress_4_19 menuconfig
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- O=./out_vexpress_4_19 -j8

这个可以直接生成uImage，注意LOADADDR这个参数
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- O=./out_vexpress_4_19 uImage LOADADDR=0x80008000 -j8

如果qemu起不来，可以menuconfig
System Type，取消Enable the L2x0 outer cache controller
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- O=./out_vexpress_4_19 -j8

执行仿真kernel，这里必须加入dtb不然仿真失败
qemu-system-arm \
	-M vexpress-a9 \
	-m 512M \
	-kernel ~/downloads/linux-4.19/out_vexpress_4_19/arch/arm/boot/zImage \
	-dtb ~/downloads/linux-4.19/out_vexpress_4_19/arch/arm/boot/dts/vexpress-v2p-ca9.dtb \
	-nographic \
	-append "console=ttyAMA0"

vexpress单板的tty设备名可以从生成的.conf里面搜索tty